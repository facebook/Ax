<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>APIs · Ax</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="The modular design of Ax enables three different usage modes, with different balances of structure to flexibility and reproducibility. Navigate to the [&quot;Tutorials&quot; page](/tutorials) for the in-depth walk-throughs of each API and usage mode. From most lightweight to fullest functionality, they are:"/><meta name="docsearch:version" content="next"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="APIs · Ax"/><meta property="og:type" content="website"/><meta property="og:url" content="https://ax.dev//versions/latest/index.html"/><meta property="og:description" content="The modular design of Ax enables three different usage modes, with different balances of structure to flexibility and reproducibility. Navigate to the [&quot;Tutorials&quot; page](/tutorials) for the in-depth walk-throughs of each API and usage mode. From most lightweight to fullest functionality, they are:"/><meta property="og:image" content="https://ax.dev//versions/latest/img/ax.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://ax.dev//versions/latest/img/ax.svg"/><link rel="shortcut icon" href="/versions/latest/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-139570076-1', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://cdn.plot.ly/plotly-latest.min.js"></script><script type="text/javascript" src="/versions/latest/js/plotUtils.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="/versions/latest/js/mathjax.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS_HTML"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/versions/latest/js/scrollSpy.js"></script><link rel="stylesheet" href="/versions/latest/css/main.css"/><script src="/versions/latest/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/versions/latest/"><img class="logo" src="/versions/latest/img/ax_lockup_white.svg" alt="Ax"/><h2 class="headerTitleWithLogo">Ax</h2></a><a href="/versions/latest/versions.html"><h3>next</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/versions/latest/docs/next/why-ax.html" target="_self">Docs</a></li><li class=""><a href="/versions/latest/tutorials/" target="_self">Tutorials</a></li><li class=""><a href="/versions/latest/api/" target="_self">API</a></li><li class=""><a href="https://github.com/facebook/Ax" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Getting Started</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Introduction</h3><ul class=""><li class="navListItem"><a class="navItem" href="/versions/latest/docs/next/why-ax.html">Why Ax?</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting Started</h3><ul class=""><li class="navListItem"><a class="navItem" href="/versions/latest/docs/next/installation.html">Installation</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/versions/latest/docs/next/api.html">APIs</a></li><li class="navListItem"><a class="navItem" href="/versions/latest/docs/next/glossary.html">Glossary</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Algorithms</h3><ul class=""><li class="navListItem"><a class="navItem" href="/versions/latest/docs/next/bayesopt.html">Bayesian Optimization</a></li><li class="navListItem"><a class="navItem" href="/versions/latest/docs/next/banditopt.html">Bandit Optimization</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Components</h3><ul class=""><li class="navListItem"><a class="navItem" href="/versions/latest/docs/next/core.html">Core</a></li><li class="navListItem"><a class="navItem" href="/versions/latest/docs/next/trial-evaluation.html">Trial Evaluation</a></li><li class="navListItem"><a class="navItem" href="/versions/latest/docs/next/data.html">Data</a></li><li class="navListItem"><a class="navItem" href="/versions/latest/docs/next/models.html">Models</a></li><li class="navListItem"><a class="navItem" href="/versions/latest/docs/next/storage.html">Storage</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">APIs</h1></header><article><div><span><p>The modular design of Ax enables three different usage modes, with different balances of structure to flexibility and reproducibility. Navigate to the <a href="/tutorials">&quot;Tutorials&quot; page</a> for the in-depth walk-throughs of each API and usage mode. From most lightweight to fullest functionality, they are:</p>
<ul>
<li><strong>Loop API</strong> (<a href="/tutorials/gpei_hartmann_loop.html">tutorial</a>) is intended for synchronous optimization loops, where <a href="/versions/latest/docs/next/glossary.html#trial">trials</a> can be evaluated right away. With this API, optimization can be executed in a single call and <a href="/versions/latest/docs/next/glossary.html#experiment">experiment</a> introspection is available once optimization is complete. <strong>Use this API only for the simplest use cases where running a single trial is fast and only one trial should be running at a time.</strong></li>
<li><strong>Service API</strong> (<a href="/tutorials/gpei_hartmann_service.html">tutorial</a>) can be used as a lightweight service for parameter-tuning applications where trials might be evaluated in parallel and data is available asynchronously (e.g. hyperparameter or simulation optimization). It requires little to no knowledge of Ax data structures and easily integrates with various schedulers. In this mode, Ax suggests one-<a href="/versions/latest/docs/next/glossary.html#arm">arm</a> trials to be evaluated by the client application, and expects them to be completed with <a href="/versions/latest/docs/next/glossary.html#metric">metric</a> data when available. <strong>This is our most popular API and a good place to start as a new user. Use it to leverage nearly full hyperparameter optimization functionality of Ax without the need to learn its architecture and how things work under the hood.</strong>
<ul>
<li>In both the Loop and the Service API, it is possible to configure the optimization algorithm via an Ax <code>GenerationStrategy</code> (<a href="/tutorials/generation_strategy.html">tutorial</a>), so use of Developer API is not required to control the optimization algorithm in Ax.</li>
</ul></li>
<li><strong>Developer API</strong> (<a href="/tutorials/gpei_hartmann_developer.html">tutorial</a>) is for ad-hoc use by data scientists, machine learning engineers, and researchers.  The developer API allows for a great deal of customization and introspection, and is recommended for those who plan to use Ax to optimize A/B tests. Using the developer API requires some knowledge of <a href="/versions/latest/docs/next/core.html">Ax architecture</a>. <strong>Use this API if you are looking to perform field experiments with <code>BatchTrial</code>-s, customize or contribute to Ax, or leverage advanced functionality that is not exposed in other APIs.</strong>
<ul>
<li>While not an API, the <strong><code>Scheduler</code></strong> (<a href="/tutorials/scheduler.html">tutorial</a>) is an important and distinct use-case of the Ax Developer API. With the <code>Scheduler</code>, it's possible to run a configurable, managed closed-loop optimization where trials are deployed and polled in an async fashion and no human intervention/oversight is required until the experiment is complete. <strong>Use the <code>Scheduler</code> when you are looking to configure and start a full experiment that will need to interact with an external system to evaluate trials.</strong></li>
</ul></li>
</ul>
<p>Here is a comparison of the three APIs in the simple case of evaluating the unconstrained synthetic Branin function:</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-1-tab-2" class="nav-link active" data-group="group_1" data-tab="tab-group-1-content-2">Loop</div><div id="tab-group-1-tab-3" class="nav-link" data-group="group_1" data-tab="tab-group-1-content-3">Service</div><div id="tab-group-1-tab-4" class="nav-link" data-group="group_1" data-tab="tab-group-1-content-4">Developer</div><div id="tab-group-1-tab-5" class="nav-link" data-group="group_1" data-tab="tab-group-1-content-5">Scheduler</div></div><div class="tab-content"><div id="tab-group-1-content-2" class="tab-pane active" data-group="group_1" tabindex="-1"><div><span><pre><code class="hljs css language-py"><span class="hljs-keyword">from</span> ax <span class="hljs-keyword">import</span> optimize<br /><span class="hljs-keyword">from</span> ax.utils.measurement.synthetic_functions <span class="hljs-keyword">import</span> branin<br /><br />best_parameters, values, experiment, model = optimize(<br />    parameters=[<br />        {<br />            <span class="hljs-string">"name"</span>: <span class="hljs-string">"x1"</span>,<br />            <span class="hljs-string">"type"</span>: <span class="hljs-string">"range"</span>,<br />            <span class="hljs-string">"bounds"</span>: [<span class="hljs-number">-5.0</span>, <span class="hljs-number">10.0</span>],<br />        },<br />        {<br />            <span class="hljs-string">"name"</span>: <span class="hljs-string">"x2"</span>,<br />            <span class="hljs-string">"type"</span>: <span class="hljs-string">"range"</span>,<br />            <span class="hljs-string">"bounds"</span>: [<span class="hljs-number">0.0</span>, <span class="hljs-number">10.0</span>],<br />        },<br />    ],<br />    evaluation_function=<span class="hljs-keyword">lambda</span> p: (branin(p[<span class="hljs-string">"x1"</span>], p[<span class="hljs-string">"x2"</span>]), <span class="hljs-number">0.0</span>),<br />    minimize=<span class="hljs-literal">True</span>,<br />)<br /></code></pre>
</span></div></div><div id="tab-group-1-content-3" class="tab-pane" data-group="group_1" tabindex="-1"><div><span><pre><code class="hljs css language-py"><span class="hljs-keyword">from</span> ax.service.ax_client <span class="hljs-keyword">import</span> AxClient<br /><span class="hljs-keyword">from</span> ax.utils.measurement.synthetic_functions <span class="hljs-keyword">import</span> branin<br /><br />ax_client = AxClient()<br />ax_client.create_experiment(<br />    name=<span class="hljs-string">"branin_test_experiment"</span>,<br />    parameters=[<br />        {<br />            <span class="hljs-string">"name"</span>: <span class="hljs-string">"x1"</span>,<br />            <span class="hljs-string">"type"</span>: <span class="hljs-string">"range"</span>,<br />            <span class="hljs-string">"bounds"</span>: [<span class="hljs-number">-5.0</span>, <span class="hljs-number">10.0</span>],<br />            <span class="hljs-string">"value_type"</span>: <span class="hljs-string">"float"</span>,<br />        },<br />        {<br />            <span class="hljs-string">"name"</span>: <span class="hljs-string">"x2"</span>,<br />            <span class="hljs-string">"type"</span>: <span class="hljs-string">"range"</span>,<br />            <span class="hljs-string">"bounds"</span>: [<span class="hljs-number">0.0</span>, <span class="hljs-number">10.0</span>],<br />        },<br />    ],<br />    objective_name=<span class="hljs-string">"branin"</span>,<br />    minimize=<span class="hljs-literal">True</span>,<br />)<br /><br /><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> range(<span class="hljs-number">15</span>):<br />    parameters, trial_index = ax_client.get_next_trial()<br />    ax_client.complete_trial(trial_index=trial_index, raw_data=branin(parameters[<span class="hljs-string">"x1"</span>], parameters[<span class="hljs-string">"x2"</span>]))<br /><br />best_parameters, metrics = ax_client.get_best_parameters()<br /></code></pre>
</span></div></div><div id="tab-group-1-content-4" class="tab-pane" data-group="group_1" tabindex="-1"><div><span><pre><code class="hljs css language-py"><span class="hljs-keyword">from</span> ax <span class="hljs-keyword">import</span> *<br /><br /><br /><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MockRunner</span><span class="hljs-params">(Runner)</span>:</span><br />    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span><span class="hljs-params">(self, trial)</span>:</span><br />        <span class="hljs-keyword">return</span> {<span class="hljs-string">"name"</span>: str(trial.index)}<br /><br /><br />branin_search_space = SearchSpace(<br />    parameters=[<br />        RangeParameter(<br />            name=<span class="hljs-string">"x1"</span>, parameter_type=ParameterType.FLOAT, lower=<span class="hljs-number">-5</span>, upper=<span class="hljs-number">10</span><br />        ),<br />        RangeParameter(<br />            name=<span class="hljs-string">"x2"</span>, parameter_type=ParameterType.FLOAT, lower=<span class="hljs-number">0</span>, upper=<span class="hljs-number">15</span><br />        ),<br />    ]<br />)<br />exp = Experiment(<br />    name=<span class="hljs-string">"test_branin"</span>,<br />    search_space=branin_search_space,<br />    optimization_config=OptimizationConfig(<br />        objective=Objective(<br />            metric=BraninMetric(name=<span class="hljs-string">"branin"</span>, param_names=[<span class="hljs-string">"x1"</span>, <span class="hljs-string">"x2"</span>]),<br />            minimize=<span class="hljs-literal">True</span>,<br />        ),<br />    ),<br />    runner=MockRunner(),<br />)<br /><br />sobol = Models.SOBOL(exp.search_space)<br /><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">5</span>):<br />    trial = exp.new_trial(generator_run=sobol.gen(<span class="hljs-number">1</span>))<br />    trial.run()<br />    trial.mark_completed()<br /><br />best_arm = <span class="hljs-literal">None</span><br /><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">15</span>):<br />    gpei = Models.GPEI(experiment=exp, data=exp.fetch_data())<br />    generator_run = gpei.gen(<span class="hljs-number">1</span>)<br />    best_arm, _ = generator_run.best_arm_predictions<br />    trial = exp.new_trial(generator_run=generator_run)<br />    trial.run()<br />    trial.mark_completed()<br /><br />exp.fetch_data()<br />best_parameters = best_arm.parameters<br /></code></pre>
</span></div></div><div id="tab-group-1-content-5" class="tab-pane" data-group="group_1" tabindex="-1"><div><span><pre><code class="hljs css language-py"><span class="hljs-keyword">from</span> ax <span class="hljs-keyword">import</span> *<br /><span class="hljs-keyword">from</span> ax.modelbridge.generation_strategy <span class="hljs-keyword">import</span> GenerationStrategy<br /><span class="hljs-keyword">from</span> ax.service <span class="hljs-keyword">import</span> Scheduler<br /><br /><span class="hljs-comment"># Full `Experiment` and `GenerationStrategy` instantiation</span><br /><span class="hljs-comment"># omitted for brevity, refer to the "Tutorials" page for detail.</span><br />experiment = Experiment(...)<br />generation_strategy = GenerationStrategy(...)<br /><br />scheduler = Scheduler(<br />    experiment=experiment,<br />    generation_strategy=generation_strategy,<br />    options=SchedulerOptions(),  <span class="hljs-comment"># Configurations for how to run the experiment</span><br />)<br /><br />scheduler.run_n_trials(<span class="hljs-number">100</span>)  <span class="hljs-comment"># Automate running 100 trials and reporting results</span><br /></code></pre>
</span></div></div></div></div>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/versions/latest/docs/next/installation.html"><span class="arrow-prev">← </span><span>Installation</span></a><a class="docs-next button" href="/versions/latest/docs/next/glossary.html"><span>Glossary</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><div class="footerSection"><h5>Legal</h5><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noreferrer noopener">Privacy</a><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noreferrer noopener">Terms</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/versions/latest/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2022 Meta Platforms, Inc.</section></footer></div></body></html>