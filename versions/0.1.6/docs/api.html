<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>APIs · Ax</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="The modular design of Ax enables three different usage modes, with different balances of structure to flexibility and reproducibility. From most lightweight to fullest functionality, they are:"/><meta name="docsearch:version" content="0.1.6"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="APIs · Ax"/><meta property="og:type" content="website"/><meta property="og:url" content="https://ax.dev//versions/0.1.6/index.html"/><meta property="og:description" content="The modular design of Ax enables three different usage modes, with different balances of structure to flexibility and reproducibility. From most lightweight to fullest functionality, they are:"/><meta property="og:image" content="https://ax.dev//versions/0.1.6/img/ax.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://ax.dev//versions/0.1.6/img/ax.svg"/><link rel="shortcut icon" href="/versions/0.1.6/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-139570076-1', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://cdn.plot.ly/plotly-latest.min.js"></script><script type="text/javascript" src="/versions/0.1.6/js/plotUtils.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="/versions/0.1.6/js/mathjax.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS_HTML"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/versions/0.1.6/js/scrollSpy.js"></script><link rel="stylesheet" href="/versions/0.1.6/css/main.css"/><script src="/versions/0.1.6/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/versions/0.1.6/"><img class="logo" src="/versions/0.1.6/img/ax_lockup_white.svg" alt="Ax"/><h2 class="headerTitleWithLogo">Ax</h2></a><a href="/versions/0.1.6/versions.html"><h3>0.1.6</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/versions/0.1.6/docs/why-ax.html" target="_self">Docs</a></li><li class=""><a href="/versions/0.1.6/tutorials/" target="_self">Tutorials</a></li><li class=""><a href="/versions/0.1.6/api/" target="_self">API</a></li><li class=""><a href="https://github.com/facebook/Ax" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Getting Started</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Introduction</h3><ul class=""><li class="navListItem"><a class="navItem" href="/versions/0.1.6/docs/why-ax.html">Why Ax?</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting Started</h3><ul class=""><li class="navListItem"><a class="navItem" href="/versions/0.1.6/docs/installation.html">Installation</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/versions/0.1.6/docs/api.html">APIs</a></li><li class="navListItem"><a class="navItem" href="/versions/0.1.6/docs/glossary.html">Glossary</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Algorithms</h3><ul class=""><li class="navListItem"><a class="navItem" href="/versions/0.1.6/docs/bayesopt.html">Bayesian Optimization</a></li><li class="navListItem"><a class="navItem" href="/versions/0.1.6/docs/banditopt.html">Bandit Optimization</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Components</h3><ul class=""><li class="navListItem"><a class="navItem" href="/versions/0.1.6/docs/core.html">Core</a></li><li class="navListItem"><a class="navItem" href="/versions/0.1.6/docs/data.html">Data</a></li><li class="navListItem"><a class="navItem" href="/versions/0.1.6/docs/models.html">Models</a></li><li class="navListItem"><a class="navItem" href="/versions/0.1.6/docs/storage.html">Storage</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">APIs</h1></header><article><div><span><p>The modular design of Ax enables three different usage modes, with different balances of structure to flexibility and reproducibility. From most lightweight to fullest functionality, they are:</p>
<ul>
<li><strong>Loop API</strong> is intended for synchronous optimization loops, where <a href="/versions/0.1.6/docs/glossary.html#trial">trials</a> can be evaluated right away. With this API, optimization can be executed in a single call and <a href="/versions/0.1.6/docs/glossary.html#experiment">experiment</a> introspection is available once optimization is complete.</li>
<li><strong>Service API</strong> can be used as a lightweight service for parameter-tuning applications where trials might be evaluated in parallel and data is available asynchronously (e.g. hyperparameter or simulation optimization). It requires little to no knowledge of Ax data structures and easily integrates with various schedulers. In this mode, Ax suggests one-<a href="/versions/0.1.6/docs/glossary.html#arm">arm</a> trials to be evaluated by the client application, and expects them to be completed with <a href="/versions/0.1.6/docs/glossary.html#metric">metric</a> data when available.</li>
<li><strong>Developer API</strong> is for ad-hoc use by data scientists, machine learning engineers, and researchers.  The developer API allows for a great deal of customization and introspection, and is recommended for those who plan to use Ax to optimize A/B tests. Using the developer API requires some knowledge of <a href="/versions/0.1.6/docs/core.html">Ax architecture</a>.</li>
</ul>
<p>Here is a comparison of the three APIs in the simple case of evaluating the unconstrained synthetic Branin function:</p>
<div class="tabs"><div class="nav-tabs"><div id="tab-group-5-tab-6" class="nav-link active" data-group="group_5" data-tab="tab-group-5-content-6">Loop</div><div id="tab-group-5-tab-7" class="nav-link" data-group="group_5" data-tab="tab-group-5-content-7">Service</div><div id="tab-group-5-tab-8" class="nav-link" data-group="group_5" data-tab="tab-group-5-content-8">Developer</div></div><div class="tab-content"><div id="tab-group-5-content-6" class="tab-pane active" data-group="group_5" tabindex="-1"><div><span><pre><code class="hljs css language-py"><span class="hljs-keyword">from</span> ax <span class="hljs-keyword">import</span> optimize<br /><span class="hljs-keyword">from</span> ax.utils.measurement.synthetic_functions <span class="hljs-keyword">import</span> branin<br /><br />best_parameters, values, experiment, model = optimize(<br />    parameters=[<br />        {<br />            <span class="hljs-string">"name"</span>: <span class="hljs-string">"x1"</span>,<br />            <span class="hljs-string">"type"</span>: <span class="hljs-string">"range"</span>,<br />            <span class="hljs-string">"bounds"</span>: [<span class="hljs-number">-5.0</span>, <span class="hljs-number">10.0</span>],<br />        },<br />        {  <br />            <span class="hljs-string">"name"</span>: <span class="hljs-string">"x2"</span>,<br />            <span class="hljs-string">"type"</span>: <span class="hljs-string">"range"</span>,<br />            <span class="hljs-string">"bounds"</span>: [<span class="hljs-number">0.0</span>, <span class="hljs-number">10.0</span>],<br />        },<br />    ],<br />    evaluation_function=<span class="hljs-keyword">lambda</span> p: branin(p[<span class="hljs-string">"x1"</span>], p[<span class="hljs-string">"x2"</span>]),<br />    minimize=<span class="hljs-literal">True</span>,<br />)<br /></code></pre>
</span></div></div><div id="tab-group-5-content-7" class="tab-pane" data-group="group_5" tabindex="-1"><div><span><pre><code class="hljs css language-py"><span class="hljs-keyword">from</span> ax.service.ax_client <span class="hljs-keyword">import</span> AxClient<br /><span class="hljs-keyword">from</span> ax.utils.measurement.synthetic_functions <span class="hljs-keyword">import</span> branin<br /><br />ax = AxClient()<br />ax.create_experiment(<br />    name=<span class="hljs-string">"branin_test_experiment"</span>,<br />    parameters=[<br />        {<br />            <span class="hljs-string">"name"</span>: <span class="hljs-string">"x1"</span>,<br />            <span class="hljs-string">"type"</span>: <span class="hljs-string">"range"</span>,<br />            <span class="hljs-string">"bounds"</span>: [<span class="hljs-number">-5.0</span>, <span class="hljs-number">10.0</span>],<br />            <span class="hljs-string">"value_type"</span>: <span class="hljs-string">"float"</span>,<br />        },<br />        {<br />            <span class="hljs-string">"name"</span>: <span class="hljs-string">"x2"</span>,<br />            <span class="hljs-string">"type"</span>: <span class="hljs-string">"range"</span>,<br />            <span class="hljs-string">"bounds"</span>: [<span class="hljs-number">0.0</span>, <span class="hljs-number">10.0</span>],<br />        },<br />    ],<br />    objective_name=<span class="hljs-string">"branin"</span>,<br />    minimize=<span class="hljs-literal">True</span>,<br />)<br /><br /><span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> range(<span class="hljs-number">15</span>):<br />    parameters, trial_index = ax.get_next_trial()<br />    ax.complete_trial(trial_index=trial_index, raw_data=branin(parameters[<span class="hljs-string">"x1"</span>], parameters[<span class="hljs-string">"x2"</span>]))<br /><br />best_parameters, metrics = ax.get_best_parameters()<br /></code></pre>
</span></div></div><div id="tab-group-5-content-8" class="tab-pane" data-group="group_5" tabindex="-1"><div><span><pre><code class="hljs css language-py"><span class="hljs-keyword">from</span> ax <span class="hljs-keyword">import</span> *<br /><br />branin_search_space = SearchSpace(<br />    parameters=[<br />        RangeParameter(<br />            name=<span class="hljs-string">"x1"</span>, parameter_type=ParameterType.FLOAT, lower=<span class="hljs-number">-5</span>, upper=<span class="hljs-number">10</span><br />        ),<br />        RangeParameter(<br />            name=<span class="hljs-string">"x2"</span>, parameter_type=ParameterType.FLOAT, lower=<span class="hljs-number">0</span>, upper=<span class="hljs-number">15</span><br />        ),<br />    ]<br />)<br />exp = SimpleExperiment(<br />    name=<span class="hljs-string">"test_branin"</span>,<br />    search_space=branin_search_space,<br />    evaluation_function=<span class="hljs-keyword">lambda</span> p: branin(p[<span class="hljs-string">"x1"</span>], p[<span class="hljs-string">"x2"</span>]),<br />    objective_name=<span class="hljs-string">"branin"</span>,<br />    minimize=<span class="hljs-literal">True</span>,<br />)<br /><br />sobol = Models.SOBOL(exp.search_space)<br /><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">5</span>):<br />    exp.new_trial(generator_run=sobol.gen(<span class="hljs-number">1</span>))<br /><br />best_arm = <span class="hljs-literal">None</span><br /><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">15</span>):<br />    gpei = Models.GPEI(experiment=exp, data=exp.eval())<br />    generator_run = gpei.gen(<span class="hljs-number">1</span>)<br />    best_arm, _ = generator_run.best_arm_predictions<br />    exp.new_trial(generator_run=generator_run)<br /><br />best_parameters = best_arm.parameters<br /></code></pre>
</span></div></div></div></div>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/versions/0.1.6/docs/installation.html"><span class="arrow-prev">← </span><span>Installation</span></a><a class="docs-next button" href="/versions/0.1.6/docs/glossary.html"><span>Glossary</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><a href="https://code.facebook.com/projects/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/versions/0.1.6/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2019 Facebook Inc.</section></footer></div></body></html>